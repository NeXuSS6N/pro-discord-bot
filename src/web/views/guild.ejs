<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= guild.name %> - Settings</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
      body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; background: #0f172a; color: #e2e8f0; }
      header { display:flex; justify-content:space-between; align-items:center; padding: 24px; }
      a.btn { background:#0ea5e9; color:white; padding:10px 16px; border-radius:10px; text-decoration:none; font-weight:600; }
      .container { max-width: 960px; margin:0 auto; padding: 24px; }
      .card { background:#111827; padding:16px; border-radius:12px; border:1px solid #1f2937; }
      label { display:block; margin-top:12px; color:#94a3b8; }
      input { width:100%; padding:10px; border-radius:8px; border:1px solid #334155; background:#0b1220; color:#e2e8f0; }
    </style>
  </head>
  <body>
    <header>
      <strong><%= guild.name %></strong>
      <div>
        <a href="/dashboard" class="btn">Back</a>
      </div>
    </header>
    <div class="container">
      <div class="card">
        <h2>Settings</h2>
        <form method="post" action="/guild/<%= guild.id %>/settings">
          <label>Locale</label>
          <input name="locale" value="<%= (settings && settings.locale) || 'en' %>" />

          <label>Welcome Channel ID</label>
          <input name="welcomeChannelId" value="<%= settings && settings.welcomeChannelId ? settings.welcomeChannelId : '' %>" />

          <label>Log Channel ID</label>
          <input name="logChannelId" value="<%= settings && settings.logChannelId ? settings.logChannelId : '' %>" />

          <label style="display:flex;align-items:center;gap:8px;margin-top:12px;">
            <input type="checkbox" name="welcomeEnabled" <%= settings && settings.welcomeEnabled ? 'checked' : '' %> /> Enable welcome messages
          </label>
          <label style="display:flex;align-items:center;gap:8px;margin-top:8px;">
            <input type="checkbox" name="economyEnabled" <%= settings && settings.economyEnabled ? 'checked' : '' %> /> Enable economy
          </label>
          <label style="display:flex;align-items:center;gap:8px;margin-top:8px;">
            <input type="checkbox" name="moderationEnabled" <%= settings && settings.moderationEnabled ? 'checked' : '' %> /> Enable moderation
          </label>

          <label>Welcome Message</label>
          <input name="welcomeMessage" value="<%= settings && settings.welcomeMessage ? settings.welcomeMessage : '' %>" />

          <label>Daily Reward Amount</label>
          <input name="dailyRewardAmount" type="number" min="0" value="<%= settings && settings.dailyRewardAmount ? settings.dailyRewardAmount : 250 %>" />

          <div style="margin-top:16px;">
            <button type="submit" class="btn">Save</button>
          </div>
        </form>
      </div>
      <div class="card" style="margin-top:16px;">
        <h2>Command Configuration</h2>
        <form method="post" action="/guild/<%= guild.id %>/commands">
          <div style="display:grid;grid-template-columns:1fr 100px 150px 160px 160px;gap:8px;align-items:center;font-weight:600;margin-bottom:8px;">
            <div>Name</div><div>Enabled</div><div>Cooldown (s)</div><div>Required Role ID</div><div>Channel ID</div>
          </div>
          <% commandConfigs.forEach(c => { %>
            <div style="display:grid;grid-template-columns:1fr 100px 150px 160px 160px;gap:8px;align-items:center;margin-bottom:6px;">
              <input value="<%= c.name %>" readonly style="background:#0b1220;border-color:#334155;color:#94a3b8" />
              <input type="checkbox" name="enabled_<%= c.name %>" <%= c.enabled === false ? '' : 'checked' %> />
              <input type="number" min="0" name="cooldownSeconds_<%= c.name %>" value="<%= c.cooldownSeconds || 0 %>" />
              <input name="requiredRoleId_<%= c.name %>" value="<%= c.requiredRoleId || '' %>" />
              <input name="channelId_<%= c.name %>" value="<%= c.channelId || '' %>" />
            </div>
          <% }) %>
          <div style="margin-top:12px;"><button type="submit" class="btn">Save Commands</button></div>
        </form>
      </div>
    </div>
  </body>
  </html>

